using System;
using Gab.Loger;

namespace Meeting_6
{
    class House
    {//------------------------------------------------------------------------
        private Plan plan;
        //---------------------------------------------------------------------
        public House(Plan buildingPlan)
        {
            plan = buildingPlan;
        }
        //---------------------------------------------------------------------
        public void Build(Team team)
        {
            bool completed = false;
            for (int i = 0, w = 0; !completed;)
            {
                foreach (var part in plan[i])
                {
                    while (!part.IsCompleted)
                    {
                        part.Build(team[w]);

                        if (part.Progress == 100)
                        {
                            team["leader"].Work(part);
                            Loger.Write($"{part.GetType().Name} is completed", Loger.MessageType.Info);
                        }

                        if (++w == team.Length) w = 0;
                    }
                }

                if (++i == plan.Length) completed = true;
            }

            Loger.Write($"House building completed", Loger.MessageType.Info);
            Console.WriteLine(@"
     /'/'/''/'//'''/'///'/''/'''''/'/'/''/'/\  
    / /   ///    /  /  /  //   / /      ///  \ 
   /    /  /      /      /    /  //   / // | |
  / / / /   //   / /  / / /     / /  // / | ||
 /___/____/________/_______//______/__//|  | |
 ||`'`''^`'*'`'``'```'`*`'``*```'''^''`|| | ||
 ||    ___________      ___________    ||    |
 ||   /_^_/\_/\_^_\    /_^_/\_/\_^_\   || | ||
 ||   |``'`'|'`'``|    |``'`'|'`'``|   ||    |
 ||   |_____|_____|    |_____|_____|   ||| | |
 ||   |     |     |    |     |     |   || |  |
 ||   |_____|_____|    |_____|_____|   ||| | |
 ||  /____________\   /____________\   ||  | |
 ||                                    || || |
 ||     ___________      _______       ||    |
 ||    /_^_/\_/\_^_\    /\/\/\/\\      || | ||
 ||    |``'`'|'`'``|   /^_^_^_^_^\     ||  | |
 ||    |_____|_____|    |        |     || |  |
 ||    | `Q' |     |    I   ()   |     ||  | |
 ||    |_`Y`_|_____|    |        |     || |  |
 ||   /__{#}_______\    |     &  |     || | /|
 ||                     I        |     ||| /#/
 ||                     |________|     || /#/
 ||____________________/=========\_____||/#/
 ||##################/============\####||#/
 ||================|===============|===||/
            ");
        }
    }//------------------------------------------------------------------------
}
